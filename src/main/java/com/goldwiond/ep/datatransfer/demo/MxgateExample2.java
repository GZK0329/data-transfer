package com.goldwiond.ep.datatransfer.demo;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class MxgateExample2 {
    public static void main(String[] args) throws Exception {
        MxgateExample2 http = new MxgateExample2();
        http.sendingPostRequest();
    }

    // HTTP Post request
    private void sendingPostRequest() throws Exception {
        // mxgate监听在localhost的8086端口
        String url = "http://10.200.50.142:8086/";
        URL obj = new URL(url);
        HttpURLConnection con = (HttpURLConnection) obj.openConnection();

        con.setRequestMethod("POST");
        con.setRequestProperty("Content-Type", "text/plain");




//        String data = "realtimedata_4\n" +
//                "630008|630008017|2022-04-28 13:26:25.199|18.34|4.21|22.89|14.01|11.68|15.49|12.42|16.0|17.5|24.88|19.56|0.44|9.63|26.34|21.45|27.78|7.68" +
//                "|6.87|26.42|20.05|21.6|0.69|3.01|8.57|7.1|19.75|13.02|14.11|9.83|20.88|15.33|9.68|9.33|27.0|29.13|16.52|21.19|" +
//                "9.88|6.31|10.58|28.25|23.49|23.29|20.86|8.5|21.23|13.65|2.79|9.06|26.43|12.61|8.06|21.82|24.1|24.63|8.13|7.45|" +
//                "22.38|25.02|21.84|20.16|24.96|15.47|27.41|25.92|10.84|22.69|6.51|1.83|24.89|7.84|12.88|14.45|21.99|22.78|29.21|18.83|" +
//                "9.17|17.33|25.33|9.56|23.96|9.28|16.52|8.64|22.89|16.46|24.28|3.79|2.37|17.18|2.19|13.67|4.46|12.15|7.11|14.77|" +
//                "22.42|27.58|1.02|16.76|15.77|15.06|20.55|20.95|1.3|10.04|10.72|8.06|15.64|15.87|25.48|8.05|6.19|5.89|21.67|6.61|" +
//                "10.58|0.86|23.32|18.24|10.64|3.57|0|0|test|1\n";


        String data = "realtimedata_4\n" +
                "630008|630008017|2022-04-28 13:26:25.199|18.34|4.21|22.89|14.01|11.68|15.49|" +
                "6.87|26.42|20.05|21.6|0.69|3.01|8.57|7.1|19.75|13.02|14.11|9.83|20.88|15.33|9.68|" +
                "9.88|6.31|10.58|28.25|23.49|23.29|20.86|8.5|21.23|13.65|2.79|9.06|26.43|12.61|8.06|" +
                "22.38|25.02|21.84|20.16|24.96|15.47|27.41|25.92|10.84|22.69|6.51|1.83|24.89|7.84|" +
                "9.17|17.33|25.33|9.56|23.96|9.28|16.52|8.64|22.89|16.46|24.28|3.79|2.37|17.18|" +
                "22.42|27.58|1.02|16.76|15.77|15.06|20.55|20.95|1.3|10.04|10.72|8.06|15.64|15.87|" +
                "10.58|0.86|23.32|18.24|10.64|3.57|0|0|test|1\n";



        String postJsonData = "data_test2\n" +
//                "2022-05-16 13:30:25.199|5|2.3|63.2|3.6\n"+
                "2022-05-21 13:30:25.199||2.3||\n";


        String s = "realtimedata_6_mars2\n" +
                "630003|630003085|2022-05-24 14:12:49.797|1.55|20.83|16.15|7.25|1.8|14.95|2.24|18.24|17.02|0.77|29.05|29.78|21.15|7.79|25.28|26.7|24.89|3.36|1.17|5.05|6.02|21.99|2.43|26.14|0.78|9.89|12.83|15.99|13.84|14.02|23.72|8.86|15.77|8.29|24.75|9.48|25.4|5.71|17.19|13.24|18.05|25.84|19.6|26.66|0.3|19.84|24.19|21.76|8.04|22.74|1\n" +
                "630003|630003085||2022-05-24 14:09:55.699|29.74|24.24|1.85|28.21|19.49||18.81|24.04|12.29||2.8||25.86||9.63|6.19|12.33||23.54||11.69|10.23||3.18|10.62|29.39|13.75|19.45||20.14|19.92||22.84|7.3|16.71||13.83||24.34|9.38|15.83|24.34|7.72||15.41|13.85|13.58|6.18|25.54||1\n" +
                "630003|630003085|2022-05-24 14:10:01.706|14.72|15.64|29.16|7.77|25.46|13.33|12.58|8.43|3.73|9.38|8.28|18.67|3.36|14.55|26.42|24.95|20.02|6.5|25.34|13.89|3.69|19.63|22.78|6.17|16.29|20.97|3.24|18.88|4.63|1.67|15.0|29.21|1.07|14.97|17.43|7.42|4.64|18.92|0.74|24.13|4.35|5.31|24.13|13.81|23.86|5.48|16.62|5.26|2.4|8.68|1\n" +
                "630003|630003085|||||27.72|13.98|26.4|3.05|29.85|23.56|10.16||||24.98|2.01|13.48||||7.15|2.76|25.7||16.21|2.62||27.99|20.83|2.45|||6.37|13.87|3.76|||7.59|14.3|12.4|11.11||11.62||0.76|25.55|14.86|26.81|0.31|22.49||24.09|1\n";

        String s1 = "realtimedata_6_mars2\n" +
                "630003|630003499|2022-05-24 14:44:50.046|19.67|||18.57|26.36|1.17|||4.92|22.93|29.21|2.07|14.5|12.57|17.69|1.4|24.35|2.85|25.66|||19.1|20.93|0.45||0.5|15.88|17.0|0.16||10.43|20.73|3.37||22.37|12.37||29.44||10.14|16.05|14.45|||24.38|0.79||17.8|||1\n" +
                "630003|630003499||10.11|||7.37|||8.39|||27.13|14.03|23.67|29.82||17.49|||22.6||12.66|9.54|16.75|5.02|14.95||26.83|11.4||3.92||7.73|0.46|9.92|25.62||10.77||26.19|16.8||22.86|2.92|13.63|18.52|5.73|9.69|6.23|24.16|4.72||1\n" +
                "630003|630003499|2022-05-24 14:38:43.954|7.0|22.54|26.45|26.54|5.92|10.12|21.38|22.11|28.69|25.95|28.93|19.42|1.51|4.0|3.01|16.25|23.72|14.3|6.55|6.69|13.94|21.59|28.64|17.34|3.69|22.11|22.94|0.54|17.17|18.33|5.06|4.94|15.06|17.9|22.75|15.85|1.3|19.08|15.12|13.96|12.79|28.33|5.28|0.44|24.87|8.63|15.06|9.2|28.45|27.58|1\n" +
                "630003|630003499||25.94|||15.4||11.43|5.12|25.56|19.98|10.0|18.55||7.15||1.4||2.09|29.74|28.5|19.98||22.63||21.24||14.0|16.12|3.11|29.45|18.25||21.75|23.59|26.12|||15.02||22.05|1.01||26.72||||20.95|14.4|5.77|23.28|7.09|1\n" +
                "630003|630003499|2022-05-24 14:47:08.072|||16.11|6.39||29.88|18.3||10.28|19.26|26.94|20.27|8.96|29.46|6.78|26.6|25.67|2.11|||26.86|18.57|||15.15|0.23|20.71||||21.31||22.85|28.85|6.9|3.91|10.64|15.03|5.11||9.39||2.04|||12.18|26.99|12.92|22.71||1\n"
                ;

        String s2 = "realtimedata_4_mars2\n" +
                "630003|630003810|2022-05-24 14:43:50.040|22.26|18.64|6.89|27.3|19.71|4.27|17.35|20.44|4.4|29.76|5.21|12.05|20.59|4.54|19.0|7.79|29.17|21.64|22.52|8.45|15.52|17.06|21.91|6.53|0.34|27.79|22.0|4.46|16.28|16.45|25.29|28.25|26.38|13.3|27.84|0.14|26.16|21.24|15.31|20.05|21.42|14.3|20.33|27.64|6.52|16.44|8.28|4.5|14.77|24.69|3.42|0.14|12.49|8.65|19.96|14.91|1.86|27.43|24.35|29.16|24.34|14.96|14.84|19.01|7.17|5.76|22.7|27.36|28.83|4.59|16.21|1.86|16.92|16.84|23.74|1.14|12.21|29.53|25.81|26.25|17.09|27.95|28.25|15.2|13.89|8.23|8.83|6.25|19.56|2.86|8.78|18.43|7.74|13.46|28.15|17.23|26.94|13.54|9.45|28.27|14.92|3.46|18.55|23.09|13.96|9.74|24.33|7.82|20.11|12.53|19.71|8.84|10.76|26.63|26.48|7.89|20.22|25.11|13.83|14.43|21.19|28.1|17.63|0|0|test|1\n"+

                "630003|630003810|2022-05-24 14:39:49.949|14.31|28.31|28.43|14.91|0.16|12.93|28.53|20.21|0.8|0.43||8.39|7.15||14.87|26.32|6.05|4.72|27.86|10.91|23.62|24.55|24.75||24.83|27.32|20.85||||8.03|9.86|8.72|18.74||18.52||25.27|||5.59|||12.85|13.36|15.76|8.81|15.32|6.65|10.22|22.51||26.29|||9.37|25.11|29.44|14.69|||13.83|7.63|22.02|8.14|21.63|8.09|6.23|0.53|3.32||3.65|1.36|13.07||||3.69||18.57|2.58|||27.31||8.6|0.84|7.21||21.8|12.63|7.11|7.34|24.96|0.97||28.44|||15.02||15.92|||27.48|14.45|5.69|9.36|19.87|5.0|||6.89||7.81||||24.35|28.9|4.93|9.83|20.44|0|||1\n"+
                "630003|630005610|2022-05-24 14:34:22.040|11.49|13.95|27.06|7.52||15.98|0.77||18.52|26.78|12.32|18.83|20.37||3.26|28.39|0.35||11.36|17.28|26.01|25.59|13.92|17.41|1.63|20.92|9.3|19.27|13.18|16.3|0.86|14.77|28.74|||15.05|8.05|22.9||13.31|12.44|22.16||||11.5|18.27||21.45|27.34|3.83||24.32|23.83|27.55||||15.52|19.07|0.95|16.18|9.65|18.3|22.1|8.45|17.83|24.4||8.62|22.94||16.74||21.55|14.83||||20.94|7.02|||5.51|23.28|4.17|||24.9|3.09|26.19|4.27||26.45|7.69|28.43|21.75|9.93|26.15|9.95|24.01|||24.27||10.48|||2.57||27.13|11.81|||5.62|11.58|27.9||7.3|||4.41|3.34|0|0|test|1\n"+
                "630003|630003810|2022-05-24 14:44:44.045|7.37|8.93|25.55|17.23|12.47|5.08|28.09|29.43|28.9|14.48|14.84|18.49|27.86|24.81|23.17|19.8|9.95|7.03|29.59|14.53|4.94|8.57|14.84|12.35|2.59|28.24|22.86|0.23|18.5|4.82|8.91|19.52|7.95|12.03|7.77|19.97|20.54|13.2|14.5|19.9|19.41|16.62|8.11|25.48|10.76|29.6|11.73|29.28|11.86|24.67|12.62|8.93|9.77|24.34|20.6|10.72|27.38|13.65|24.9|20.72|19.05|19.68|6.8|16.62|4.76|16.33|8.45|18.39|8.88|20.16|27.72|3.06|28.19|18.66|13.82|10.94|13.3|6.73|9.42|24.54|27.46|29.85|2.42|10.3|28.3|3.36|22.71|24.39|10.1|7.06|28.92|28.96|17.13|22.16|14.24|3.88|22.81|14.22|11.72|10.62|4.21|0.4|25.67|10.44|7.47|12.69|8.59|7.93|6.37|0.81|21.79|22.83|24.24|8.17|1.8|29.06|7.87|23.35|15.78|28.84|1.97|26.42|4.9|0|0|test|1\n" +
                "630003|630003810|2022-05-24 14:40:13.965|22.9|21.05|18.91|24.38|22.05|20.03|29.45|22.97|16.57|10.82|7.16|22.03|18.87|1.92|7.95|24.81|12.04|7.91|7.24|21.56|29.43|18.42|2.18|24.71|10.86|15.19|2.52|7.55|20.79|4.83|18.98|7.96|29.5|5.44|15.1|29.15|14.87|24.18|21.88|23.98|29.77|20.04|23.68|27.32|28.27|22.31|28.84|2.15|23.72|9.02|29.81|19.71|11.27|2.6|4.11|12.31|19.32|21.11|0.87|8.94|26.08|2.75|26.2|8.9|20.67|9.67|25.46|6.95|12.08|13.3|21.52|25.68|4.46|28.23|4.4|5.94|22.95|15.41|10.5|24.93|11.08|6.56|8.2|3.91|28.57|22.44|20.88|23.07|17.18|15.91|9.15|20.09|1.58|17.84|0.08|11.69|13.22|19.49|13.81|13.21|26.3|19.0|6.06|10.75|27.6|1.6|9.07|13.24|25.27|24.57|3.87|28.16|26.08|26.66|12.66|4.17|25.7|29.77|12.11|7.3|12.99|26.54|16.25|0|0|test|1\n"
                ;

        con.setDoOutput(true);
        DataOutputStream wr = new DataOutputStream(con.getOutputStream());
        // 数据有中文时，可以通过postJsonData.getBytes("UTF-8")编码
        wr.writeBytes(s2);
        wr.flush();
        wr.close();

        int responseCode = con.getResponseCode();
        System.out.println("Sending 'POST' request to URL : " + url);
        System.out.println("Post Data : " + postJsonData);
        System.out.println("Response Code : " + responseCode);

        BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
        String output;
        StringBuffer response = new StringBuffer();

        while ((output = in.readLine()) != null) {
            response.append(output);
        }
        in.close();

        System.out.println(response);
    }
}
